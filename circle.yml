machine:
  timezone: Asia/Tokyo
  node:
    version: 6.0.0

dependencies:
  override:
    - npm install -g typescript
    - npm install -g tsconfig-cli
    - npm install -g electron-packager
    - npm install

deployment:
  master:
    branch: master
    commands:
      - npm run package_circleci
      - zip -r $CIRCLE_ARTIFACTS/$CIRCLE_PROJECT_REPONAME_osx.zip ../build/ancient-night-darwin-x64/
      - zip -r $CIRCLE_ARTIFACTS/$CIRCLE_PROJECT_REPONAME_win.zip ../build/ancient-night-win32-x64/
     
test:
  pre:
      - cd ~/$CIRCLE_PROJECT_REPONAME/src/main 
      - tsconfig -u 
      - tsc
      - cd ~/$CIRCLE_PROJECT_REPONAME/src/renderer
      - tsconfig -u 
      - tsc
      - cd ~/$CIRCLE_PROJECT_REPONAME/ 
  override:
    - echo No test, never mind.
